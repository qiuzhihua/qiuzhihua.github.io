{"name":"Qiuzhihua.GitHub.io","tagline":"knowledge","body":"title: qiudushu\r\ndate: 2015-01-11 17:48:04\r\ntags:lableTextHeight\r\n---\r\nstatic UILabel *lable;\r\n\r\n@implementation lableTextHeight\r\n+ (void)initialize\r\n{\r\n    if(self == [lableTextHeight class]){\r\n        //专门计算微博内容高度的方法\r\n        NSInteger defaultWidth = [[UIScreen mainScreen] bounds].size.width -16;\r\n        lable = [[UILabel alloc] init];\r\n        lable.lineBreakMode = NSLineBreakByTruncatingTail;\r\n        lable.numberOfLines = 0;\r\n        lable.translatesAutoresizingMaskIntoConstraints = NO;\r\n        \r\n        NSLayoutConstraint  *constraint = [NSLayoutConstraint constraintWithItem:lable attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:defaultWidth];\r\n        [lable addConstraint:constraint];\r\n    }\r\n}\r\n\r\n+(CGFloat)textHeightWith:(NSString *)string FontSize:(NSInteger)fontSize width:(float)width\r\n{\r\n    lable.font = [UIFont systemFontOfSize:fontSize];\r\n    NSArray *constraints;\r\n    if (width != 0 && lable.bounds.size.width != width) {\r\n        constraints  = lable.constraints;//约束\r\n        [lable removeConstraints:lable.constraints];\r\n        \r\n        NSLayoutConstraint *contraint = [NSLayoutConstraint constraintWithItem:lable attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:width];\r\n        \r\n        [lable addConstraint:contraint];\r\n    }\r\n    lable.text = string;\r\n    \r\n    CGSize size = [lable systemLayoutSizeFittingSize:UILayoutFittingCompressedSize];\r\n    if (constraints) {\r\n        [lable removeConstraints:lable.constraints];\r\n        [lable addConstraints:constraints];\r\n    }\r\n    return size.height;\r\n}\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}